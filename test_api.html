<!DOCTYPE html>
<html>
<head>
    <title>API Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .endpoint { background: #f5f5f5; padding: 10px; margin: 10px 0; border-left: 4px solid #007bff; }
        .method { font-weight: bold; color: #007bff; }
        .path { font-family: monospace; }
    </style>
</head>
<body>
    <h1>Document Loader Web API - Available Endpoints</h1>
    
    <h2>üîß Schema Management (what we added)</h2>
    <div class="endpoint">
        <span class="method">GET</span> <span class="path">/api/v1/schemas/connection/check</span>
        <p>Test database connectivity</p>
    </div>
    <div class="endpoint">
        <span class="method">POST</span> <span class="path">/api/v1/schemas/database/create</span>
        <p>Create database and schema</p>
    </div>
    <div class="endpoint">
        <span class="method">POST</span> <span class="path">/api/v1/schemas/schemas</span>
        <p>Create new schema</p>
    </div>
    <div class="endpoint">
        <span class="method">GET</span> <span class="path">/api/v1/schemas/schemas</span>
        <p>List all schemas</p>
    </div>
    <div class="endpoint">
        <span class="method">GET</span> <span class="path">/api/v1/schemas/schemas/{schema_name}</span>
        <p>Get schema info</p>
    </div>
    <div class="endpoint">
        <span class="method">DELETE</span> <span class="path">/api/v1/schemas/schemas/{schema_name}</span>
        <p>Drop schema</p>
    </div>

    <h2>üìö Knowledge Bases</h2>
    <div class="endpoint">
        <span class="method">GET</span> <span class="path">/api/v1/knowledge-bases/multi-source/list</span>
        <p>List all multi-source knowledge bases</p>
    </div>
    <div class="endpoint">
        <span class="method">POST</span> <span class="path">/api/v1/knowledge-bases/{kb_name}/sync</span>
        <p>Sync knowledge base</p>
    </div>

    <h2>üîê Authentication</h2>
    <div class="endpoint">
        <span class="method">POST</span> <span class="path">/api/v1/auth/login</span>
        <p>User login</p>
    </div>

    <h2>‚öôÔ∏è CLI Operations</h2>
    <div class="endpoint">
        <span class="method">POST</span> <span class="path">/api/v1/cli/knowledge-bases/create</span>
        <p>Create knowledge base via CLI</p>
    </div>
    <div class="endpoint">
        <span class="method">GET</span> <span class="path">/api/v1/cli/knowledge-bases/list</span>
        <p>List knowledge bases via CLI</p>
    </div>

    <h2>üè¢ Business Dashboard</h2>
    <p><a href="http://localhost:8080/">View Business Dashboard</a></p>
    
    <h2>üìñ API Documentation</h2>
    <p><strong>Swagger UI:</strong> <a href="http://localhost:8080/docs" target="_blank">http://localhost:8080/docs</a></p>
    <p><strong>ReDoc:</strong> <a href="http://localhost:8080/redoc" target="_blank">http://localhost:8080/redoc</a></p>
    <p><strong>OpenAPI JSON:</strong> <a href="http://localhost:8080/openapi.json" target="_blank">http://localhost:8080/openapi.json</a></p>

    <h2>üß™ Test Endpoints</h2>
    <button onclick="testConnection()">Test Database Connection</button>
    <button onclick="listSchemas()">List Schemas</button>
    <div id="results" style="margin-top: 20px; padding: 10px; background: #f9f9f9; display: none;"></div>

    <script>
        async function testConnection() {
            try {
                const response = await fetch('/api/v1/schemas/connection/check');
                const data = await response.json();
                showResults('Database Connection Test', data);
            } catch (error) {
                showResults('Error', { error: error.message });
            }
        }

        async function listSchemas() {
            try {
                const response = await fetch('/api/v1/schemas/schemas');
                const data = await response.json();
                showResults('List Schemas', data);
            } catch (error) {
                showResults('Error', { error: error.message });
            }
        }

        function showResults(title, data) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `<h3>${title}</h3><pre>${JSON.stringify(data, null, 2)}</pre>`;
            resultsDiv.style.display = 'block';
        }
    </script>
</body>
</html>